<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
        <title>Pac-Man Desktop</title>
        <style>
            * {padding: 0; margin: 0; }
            canvas { background: #999; display: block; margin: 0 auto; }
        </style>
    </head>
    <body>
        <canvas id="gameCanvas" width="900" height="300"></canvas>
        <script>
            let gameData = [
                [1,1,1,1,1,1,1,1,1,1,1,1,1],
                [1,2,2,2,2,2,1,2,2,2,2,2,1],
                [1,2,1,1,1,2,1,2,1,1,1,2,1],
                [1,2,1,2,2,2,2,2,2,2,1,2,1],
                [1,2,2,2,1,1,5,1,1,2,2,2,1],
                [1,2,1,2,2,2,2,2,2,2,1,2,1],
                [1,2,1,1,2,2,1,2,2,1,1,2,1],
                [1,2,2,2,2,2,1,2,2,2,2,2,1],
                [1,1,1,1,1,1,1,1,1,1,1,1,1]
            ];
            
            const wall = 1;
            const coin = 2;
            const ground = 3;
            const pacman = 5;
            
            let map;
            let pacman = {
            x: 6,
            y: 4,
            direction: 'right'
            };
            function createTiles(data) {
                let tilesArray = [];
                for (let row of data) {
                    for (let col of row) {
                        let tile = document.createElement('div');
                        tile.classList.add('tile');
                            if (col == wall) {
                                tile.classList.add('wall');
                            } else if (col == coin) {
                                tile.classList.add('coin');
                            } else if (col == ground) {
                                tile.classList.add('ground');
                            } else if (col == pacman) {
                                tile.classList.add('pacman');
                        tile.classList.add(pacman.direction);
                        }
                        tilesArray.push(tile);
                    }
                    let brTile = document.createElement('br');
                    tilesArray.push(brTile);
                }
                return tilesArray;
            }
            
            function drawMap() {
                map = document.createElement('div');
                let tiles = createTiles(gameData);
                for (let tile of tiles) {
                    map.appendChild(tile);
                }
                document.body.appendChild(map);
            }
            
            function eraseMap() {
                document.body.removeChild(map);
            }
            
            function moveDown() {
                pacman.direction = 'down';
                if (gameData[pacman.y+1][pacman.x] !== wall) {
                    gameData[pacman.y][pacman.x] = ground;
                    pacman.y = pacman.y + 1 ;
                    gameData[pacman.y][pacman.x] = pacman;
                }
            }

            function moveUp() {
                pacman.direction = 'up';
                if (gameData[pacman.y-1][pacman.x] !== wall) {
                    gameData[pacman.y][pacman.x] = ground;
                    pacman.y = pacman.y - 1;
                    gameData[pacman.y][pacman.x] = pacman;
                }
            }

            function moveLeft() {
                pacman.direction = 'left';
                if (gameData[pacman.y][pacman.x-1] !== wall) {
                    gameData[pacman.y][pacman.x] = ground;
                    pacman.x = pacman.x - 1 ;
                    gameData[pacman.y][pacman.x] = pacman;
                }
            }

            function moveRight() {
                pacman.direction = 'right';
                if (gameData[pacman.y][pacman.x+1] !== wall) {
                    gameData[pacman.y][pacman.x] = ground;
                    pacman.x = pacman.x + 1 ;
                    gameData[pacman.y][pacman.x] = pacman;
                }
            }
            
            function setupKeyboardControls() {
                document.addEventListener('keydown', function (e) {
                    if (e.keyCode === 37) {        
                        moveLeft();
                    } else if (e.keyCode === 38) {  
                        moveUp();
                    } else if (e.keyCode === 39) {   
                        moveRight();
                    } else if (e.keyCode === 40) {  
                        moveDown();
                    }
                eraseMap();
                drawMap();
                });
            }
            
            function startGame() {
                drawMap();
                setupKeyboardControls();
            }
            
            startGame();

            /*let canvas = document.getElementById('gameCanvas')
            let ctx = canvas.getContext('2d')
            let animationId = 0;
            let player = {
                x: 10,
                y: 10,
                w: 20,
                h: 20,
                speed: 20
            }

            function move(e){
            if(e.key === "ArrowUp") {
                if(player.y - player.speed >= 0) {
                    player.y -= player.speed
                    }
                } else if(e.key === "ArrowDown") {
                    if(player.y + player.h + player.speed <= canvas.height) {
                        player.y += player.speed
                    }
                } else if(e.key === "ArrowLeft") {
                    if(player.x - player.speed >= 0) {
                        player.x -= player.speed
                    }
                } else if(e.key === "ArrowRight") {
                    if(player.x + player.w + player.speed <= canvas.width) {
                        player.x += player.speed
                    }
                }
            }
            function animationLoop() {
                animationId = window.requestAnimationFrame(animationLoop)
                ctx.clearRect(0, 0, canvas.width, canvas.height)
                ctx.strokeRect(0, 0, canvas.width, canvas.height)
                ctx.fillRect(player.x, player.y, player.w, player.h)
            }
            document.onkeydown = move
            animationLoop()*/
        </script>
    </body>
</html>





    /* Do this last
// let bricks = [
//     {
//         x: 50,
//         y: 50,
//         w: 60,
//         h: 40,
//     }
// ]
// let wallCollide = true
// function drawWall() {
//     bricks.forEach((brick, i) => {
//         ctx.strokeRect(brick.x, brick.y, brick.w,  brick.h)
//     })
// }
// function wallCollision() {
//     bricks.forEach(brick => {
//         if(player.x + player.w + player.speed <= brick.x){
//             wallCollide = false
//         }
//     })
// } Do this last */


    // ctx.strokeRect(30, 30, 5, 5)
    // when the game is window.cancelAnimationFrame(animationId)

// Create coins and draw coins evenly on canvas
// Make coins disappear when you touch them
// Create ghost and draw them
// When you touch ghost game over
// Make ghost follow you
// Create and draw walls
// Collision detection for walls
